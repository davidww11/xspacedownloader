<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free Twitter Video Downloader - Download Twitter videos instantly and easily. Save Twitter videos in high quality for free. Fast, secure, and no registration required.">
    <meta name="keywords" content="twitter video downloader, download twitter video, save twitter video, twitter video download, x video downloader, free twitter downloader">
    <meta name="author" content="Twitter Video Downloader">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Twitter Video Downloader - Download Twitter Videos Free">
    <meta property="og:description" content="Download Twitter videos instantly and for free. High quality video downloads with no registration required.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.twittervideodownloader.com">
    <meta property="og:image" content="/images/twitter-downloader-preview.jpg">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Twitter Video Downloader - Download Twitter Videos Free">
    <meta name="twitter:description" content="Download Twitter videos instantly and for free. High quality video downloads with no registration required.">
    <meta name="twitter:image" content="/images/twitter-downloader-preview.jpg">
    
    <title>Twitter Video Downloader - Download Twitter Videos Free | Fast & Easy</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="canonical" href="https://www.twittervideodownloader.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://x-downloader.com">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Twitter Video Downloader",
        "description": "Free Twitter Video Downloader - Download Twitter videos instantly and easily",
        "url": "https://www.twittervideodownloader.com",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "All",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Twitter Video Downloader</h1>
                <p class="tagline">Download Twitter Videos Free & Fast</p>
            </div>
            <nav class="nav" role="navigation" aria-label="Main navigation">
                <ul>
                    <li><a href="#downloader">Downloader</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#how-to">How To Use</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1 class="hero-title">Twitter Video Downloader</h1>
                <!--
                <p class="hero-subtitle">Download Twitter videos instantly for free</p>
                <p class="hero-description">
                    Save your favorite Twitter videos in high quality with our free Twitter video downloader. 
                    No registration required, no watermarks, and completely free to use. 
                    Simply paste the Twitter video URL and download instantly.
                </p>
                -->
            </div>
        </section>

        <section id="downloader" class="downloader-section">
            <div class="container">
                <h2>Free Twitter Video Downloader</h2>
                <div class="downloader-wrapper">
                    <div class="downloader-container">
                        <div class="input-section">
                            <div class="input-wrapper">
                                <input type="url" 
                                       id="twitterUrl" 
                                       placeholder="Paste Twitter video URL here (e.g., https://twitter.com/username/status/123456789)" 
                                       class="url-input"
                                       aria-label="Twitter video URL">
                                <div class="format-selector">
                                    <label for="format">Format:</label>
                                    <select id="format" class="format-select">
                                        <option value="mp4">MP4 (Video)</option>
                                        <option value="mp3">MP3 (Audio)</option>
                                    </select>
                                </div>
                            </div>
                            <button id="downloadBtn" class="download-btn" type="button">
                                <span class="btn-text">Download Video</span>
                                <span class="btn-loading" style="display: none;">
                                    <span class="spinner"></span>
                                    Processing...
                                </span>
                            </button>
                        </div>
                        
                        <div id="result-section" class="result-section" style="display: none;">
                            <div class="video-info">
                                <div class="video-thumbnail">
                                    <img id="videoThumbnail" src="" alt="Video thumbnail" style="display: none;">
                                </div>
                                <div class="video-details">
                                    <h3 id="videoTitle">Video Title</h3>
                                    <p id="videoAuthor">@username</p>
                                    <p id="videoDuration">Duration: --:--</p>
                                </div>
                            </div>
                            
                            <div class="download-options">
                                <h4>Choose Quality:</h4>
                                <div id="qualityOptions" class="quality-grid">
                                    <!-- Quality options will be populated here -->
                                </div>
                            </div>
                        </div>
                        
                        <div id="error-section" class="error-section" style="display: none;">
                            <div class="error-icon">âš ï¸</div>
                            <h3>Error</h3>
                            <p id="errorMessage">Something went wrong. Please try again.</p>
                            <button id="retryBtn" class="retry-btn">Try Again</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="features-section">
            <div class="container">
                <h2>Why Choose Our Twitter Video Downloader?</h2>
                <div class="features-grid">
                    <article class="feature">
                        <div class="feature-icon">
                            <span aria-hidden="true">âš¡</span>
                        </div>
                        <h3>Lightning Fast</h3>
                        <p>Download Twitter videos in seconds with our optimized servers and fast processing technology.</p>
                    </article>
                    
                    <article class="feature">
                        <div class="feature-icon">
                            <span aria-hidden="true">ğŸ†“</span>
                        </div>
                        <h3>100% Free</h3>
                        <p>Completely free Twitter video downloader with no hidden fees, subscriptions, or registration required.</p>
                    </article>
                    
                    <article class="feature">
                        <div class="feature-icon">
                            <span aria-hidden="true">ğŸ“±</span>
                        </div>
                        <h3>Mobile Friendly</h3>
                        <p>Works perfectly on all devices - desktop, tablet, and mobile. Download Twitter videos anywhere, anytime.</p>
                    </article>
                    
                    <article class="feature">
                        <div class="feature-icon">
                            <span aria-hidden="true">ğŸ”’</span>
                        </div>
                        <h3>Safe & Secure</h3>
                        <p>Your privacy is protected. We don't store your videos or personal information. Completely secure downloads.</p>
                    </article>
                    
                    <article class="feature">
                        <div class="feature-icon">
                            <span aria-hidden="true">ğŸ¥</span>
                        </div>
                        <h3>High Quality</h3>
                        <p>Download Twitter videos in original quality including HD videos. Multiple format options available.</p>
                    </article>
                    
                    <article class="feature">
                        <div class="feature-icon">
                            <span aria-hidden="true">ğŸŒ</span>
                        </div>
                        <h3>No Software Needed</h3>
                        <p>Browser-based Twitter video downloader. No need to install any software or browser extensions.</p>
                    </article>
                </div>
            </div>
        </section>

        <section id="how-to" class="how-to-section">
            <div class="container">
                <h2>How to Download Twitter Videos</h2>
                <div class="steps-grid">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>Copy Twitter Video URL</h3>
                        <p>Go to Twitter, find the video you want to download, and copy the tweet URL from your browser's address bar.</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>Paste URL</h3>
                        <p>Paste the Twitter video URL into the downloader tool above and click the download button.</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>Download Video</h3>
                        <p>Choose your preferred video quality and format, then click download to save the Twitter video to your device.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="faq-section">
            <div class="container">
                <h2>Frequently Asked Questions</h2>
                <div class="faq-grid">
                    <div class="faq-item">
                        <h3>Is this Twitter video downloader free?</h3>
                        <p>Yes, our Twitter video downloader is completely free to use with no hidden costs or subscription fees.</p>
                    </div>
                    
                    <div class="faq-item">
                        <h3>Do I need to create an account?</h3>
                        <p>No registration or account creation is required. Simply paste the Twitter video URL and download instantly.</p>
                    </div>
                    
                    <div class="faq-item">
                        <h3>What video formats are supported?</h3>
                        <p>We support multiple video formats including MP4, which is compatible with all devices and platforms.</p>
                    </div>
                    
                    <div class="faq-item">
                        <h3>Is it safe to use?</h3>
                        <p>Yes, our service is completely safe and secure. We don't store your videos or collect personal information.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer id="contact" class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Twitter Video Downloader</h3>
                    <p>The fastest and most reliable way to download Twitter videos for free. Available worldwide.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Information</h3>
                    <p>Email: </p>
                    <p>Business Hours: 24/7 Online Support</p>
                    <p>Response Time: Within 24 hours</p>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#downloader">Video Downloader</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#how-to">How to Use</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Legal</h3>
                    <p>This tool is for downloading videos you own or have permission to download. Please respect copyright laws and Twitter's terms of service.</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Twitter Video Downloader. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a> | <a href="#">DMCA</a></p>
            </div>
        </div>
    </footer>
    <div style="display: none;">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-5F6XX9E5G7"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-5F6XX9E5G7');
        </script>
    </div>
    <script>
        class TwitterVideoDownloader {
            constructor() {
                this.initializeElements();
                this.bindEvents();
            }

            initializeElements() {
                this.urlInput = document.getElementById('twitterUrl');
                this.formatSelect = document.getElementById('format');
                this.downloadBtn = document.getElementById('downloadBtn');
                this.btnText = this.downloadBtn.querySelector('.btn-text');
                this.btnLoading = this.downloadBtn.querySelector('.btn-loading');
                this.resultSection = document.getElementById('result-section');
                this.errorSection = document.getElementById('error-section');
                this.retryBtn = document.getElementById('retryBtn');
            }

            bindEvents() {
                this.downloadBtn.addEventListener('click', () => this.handleDownload());
                this.retryBtn.addEventListener('click', () => this.resetForm());
                this.urlInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.handleDownload();
                });
                this.urlInput.addEventListener('input', () => this.validateUrl());
            }

            validateUrl() {
                const url = this.urlInput.value.trim();
                const isValid = this.isValidTwitterUrl(url);
                this.downloadBtn.disabled = !isValid || !url;
                return isValid;
            }

            isValidTwitterUrl(url) {
                const patterns = [
                    /^https?:\/\/(www\.)?(twitter\.com|x\.com)\/\w+\/status\/\d+/,
                    /^https?:\/\/t\.co\/\w+/
                ];
                return patterns.some(pattern => pattern.test(url));
            }

            async handleDownload() {
                if (!this.validateUrl()) {
                    this.showError('Please enter a valid Twitter/X video URL');
                    return;
                }

                const url = this.urlInput.value.trim();
                const format = this.formatSelect.value;

                this.setLoading(true);
                this.hideError();
                this.hideResult();

                try {
                    const response = await fetch('/api/download', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ url, format })
                    });

                    const data = await response.json();

                    if (!response.ok) {
                        throw new Error(data.error || 'Download failed');
                    }

                    this.showResult(data);
                } catch (error) {
                    console.error('Download error:', error);
                    
                    // Provide more detailed error information
                    let errorMessage = 'Failed to download video. Please try again.';
                    
                    if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {
                        errorMessage = 'âŒ Network connection failed. Please check:\n' +
                                     'â€¢ Is the server running on port 8000?\n' +
                                     'â€¢ Try accessing http://localhost:8000/debug for diagnostics\n' +
                                     'â€¢ Check browser console for more details';
                    } else if (error.message) {
                        errorMessage = error.message;
                    }
                    
                    this.showError(errorMessage);
                } finally {
                    this.setLoading(false);
                }
            }

            setLoading(loading) {
                this.downloadBtn.disabled = loading;
                this.btnText.style.display = loading ? 'none' : 'inline';
                this.btnLoading.style.display = loading ? 'flex' : 'none';
            }

            showResult(data) {
                const videoTitle = document.getElementById('videoTitle');
                const videoAuthor = document.getElementById('videoAuthor');
                const videoDuration = document.getElementById('videoDuration');
                const videoThumbnail = document.getElementById('videoThumbnail');
                const qualityOptions = document.getElementById('qualityOptions');

                // Update video info
                videoTitle.textContent = data.title || 'Twitter Video';
                videoAuthor.textContent = data.author || '@unknown';
                videoDuration.textContent = `Duration: ${data.duration || 'Unknown'}`;

                // Update thumbnail
                if (data.thumbnail) {
                    videoThumbnail.src = data.thumbnail;
                    videoThumbnail.style.display = 'block';
                } else {
                    videoThumbnail.style.display = 'none';
                }

                // Clear and populate quality options
                qualityOptions.innerHTML = '';

                if (data.formats && data.formats.length > 0) {
                    data.formats.forEach(format => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'quality-option';
                        
                        optionDiv.innerHTML = `
                            <div class="quality-info">
                                <div class="quality-label">${format.quality || 'Standard Quality'}</div>
                                <div class="quality-details">${format.ext?.toUpperCase() || 'MP4'} â€¢ ${format.filesize || 'Unknown size'}</div>
                            </div>
                            <button class="quality-download-btn" onclick="window.downloadFile('${format.url}', '${format.filename || 'video'}')">
                                Download
                            </button>
                        `;
                        
                        qualityOptions.appendChild(optionDiv);
                    });
                } else {
                    // Fallback single download option
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'quality-option';
                    
                    optionDiv.innerHTML = `
                        <div class="quality-info">
                            <div class="quality-label">Download</div>
                            <div class="quality-details">${data.format?.toUpperCase() || 'MP4'}</div>
                        </div>
                        <button class="quality-download-btn" onclick="window.downloadFile('${data.download_url}', '${data.filename || 'video'}')">
                            Download
                        </button>
                    `;
                    
                    qualityOptions.appendChild(optionDiv);
                }

                this.resultSection.style.display = 'block';
            }

            showError(message) {
                const errorMessage = document.getElementById('errorMessage');
                errorMessage.textContent = message;
                this.errorSection.style.display = 'block';
                this.resultSection.style.display = 'none';
            }

            hideError() {
                this.errorSection.style.display = 'none';
            }

            hideResult() {
                this.resultSection.style.display = 'none';
            }

            resetForm() {
                this.urlInput.value = '';
                this.hideError();
                this.hideResult();
                this.downloadBtn.disabled = true;
            }
        }

        // Enhanced download function with mobile optimization
        window.downloadFile = function(url, filename) {
            console.log('Download initiated for:', url, 'filename:', filename);
            
            // Detect mobile devices
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isAndroid = /Android/i.test(navigator.userAgent);
            const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
            
            console.log('Device detection:', { isMobile, isAndroid, isIOS });
            
            try {
                // Show download started message
                const downloadMsg = document.createElement('div');
                downloadMsg.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #1d9bf0;
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    z-index: 10000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    font-family: Arial, sans-serif;
                    font-size: 14px;
                    max-width: 300px;
                `;
                downloadMsg.textContent = `ğŸ”„ æ­£åœ¨å‡†å¤‡ä¸‹è½½: ${filename || 'video.mp4'}`;
                document.body.appendChild(downloadMsg);
                
                // Mobile-specific download handling
                if (isMobile) {
                    console.log('Using mobile download method');
                    
                    downloadMsg.textContent = `ğŸ“± ç§»åŠ¨ç«¯ä¸‹è½½å‡†å¤‡ä¸­...`;
                    downloadMsg.style.background = '#f39c12';
                    
                    // Create mobile download interface without direct links
                    const createMobileDownloadInterface = (downloadUrl, fileName) => {
                        // Update message
                        downloadMsg.style.background = '#ff6b6b';
                        downloadMsg.innerHTML = `
                            <div>ğŸ“± ç§»åŠ¨ç«¯ä¸‹è½½è¯´æ˜</div>
                            <div style="font-size: 12px; margin-top: 8px;">
                                è¯·æŒ‰ç…§ä¸‹æ–¹æ­¥éª¤ä¸‹è½½è§†é¢‘
                            </div>
                        `;
                        
                        // Create a comprehensive mobile download interface
                        const interfaceContainer = document.createElement('div');
                        interfaceContainer.style.cssText = `
                            position: fixed;
                            top: 80px;
                            left: 20px;
                            right: 20px;
                            bottom: 20px;
                            background: #1a1a1a;
                            color: white;
                            padding: 20px;
                            border-radius: 12px;
                            z-index: 10001;
                            box-shadow: 0 8px 24px rgba(0,0,0,0.5);
                            font-family: Arial, sans-serif;
                            overflow-y: auto;
                        `;
                        
                        interfaceContainer.innerHTML = `
                            <div style="text-align: center; margin-bottom: 20px;">
                                <h3 style="margin: 0; color: #1d9bf0;">ğŸ“± ç§»åŠ¨ç«¯è§†é¢‘ä¸‹è½½</h3>
                                <p style="margin: 10px 0; font-size: 14px; color: #ccc;">
                                    ${fileName || 'video.mp4'}
                                </p>
                            </div>
                            
                            <div style="background: #2a2a2a; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 10px 0; color: #1d9bf0;">ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šå¤åˆ¶ä¸‹è½½é“¾æ¥</h4>
                                <div style="background: #333; padding: 10px; border-radius: 6px; margin-bottom: 10px; word-break: break-all; font-size: 12px; color: #ccc;">
                                    ${downloadUrl}
                                </div>
                                <button onclick="navigator.clipboard.writeText('${downloadUrl}').then(() => {
                                    this.textContent = 'âœ… å·²å¤åˆ¶ï¼';
                                    this.style.background = '#51cf66';
                                    setTimeout(() => {
                                        this.textContent = 'ğŸ“‹ å¤åˆ¶é“¾æ¥';
                                        this.style.background = '#1d9bf0';
                                    }, 2000);
                                }).catch(() => {
                                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä¸Šæ–¹é“¾æ¥');
                                })" 
                                        style="
                                            width: 100%;
                                            background: #1d9bf0;
                                            color: white;
                                            border: none;
                                            padding: 12px;
                                            border-radius: 6px;
                                            font-size: 14px;
                                        ">
                                    ğŸ“‹ å¤åˆ¶é“¾æ¥
                                </button>
                            </div>
                            
                            <div style="background: #2a2a2a; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 10px 0; color: #51cf66;">ğŸ¯ ç¬¬äºŒæ­¥ï¼šé€‰æ‹©ä¸‹è½½æ–¹å¼</h4>
                                <div style="margin-bottom: 15px;">
                                    <h5 style="margin: 0 0 5px 0; color: #ffd43b;">æ–¹å¼1ï¼šæµè§ˆå™¨ä¸‹è½½</h5>
                                    <button onclick="window.open('${downloadUrl}', '_blank')" 
                                            style="
                                                width: 100%;
                                                background: #51cf66;
                                                color: white;
                                                border: none;
                                                padding: 10px;
                                                border-radius: 6px;
                                                font-size: 13px;
                                                margin-bottom: 5px;
                                            ">
                                        ğŸŒ åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€
                                    </button>
                                    <p style="margin: 0; font-size: 11px; color: #999;">
                                        æ‰“å¼€åï¼Œé•¿æŒ‰è§†é¢‘é€‰æ‹©"ä¿å­˜è§†é¢‘"
                                    </p>
                                </div>
                                
                                <div style="margin-bottom: 15px;">
                                    <h5 style="margin: 0 0 5px 0; color: #ffd43b;">æ–¹å¼2ï¼šä¸‹è½½å™¨åº”ç”¨</h5>
                                    <div style="font-size: 12px; color: #ccc; line-height: 1.4;">
                                        æ¨èä½¿ç”¨ï¼š<br>
                                        â€¢ ADMä¸‹è½½å™¨ (Android Download Manager)<br>
                                        â€¢ 1DMæµè§ˆå™¨å’Œä¸‹è½½å™¨<br>
                                        â€¢ Turbo Download Manager<br>
                                        <br>
                                        <strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong><br>
                                        1. ç‚¹å‡»ä¸Šæ–¹"ğŸ“‹ å¤åˆ¶é“¾æ¥"<br>
                                        2. æ‰“å¼€ä¸‹è½½å™¨åº”ç”¨<br>
                                        3. ç²˜è´´é“¾æ¥å¼€å§‹ä¸‹è½½
                                    </div>
                                </div>
                            </div>
                            
                            <div style="background: #2a2a2a; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 10px 0; color: #ff6b6b;">ğŸ’¡ ä¸åŒæµè§ˆå™¨æ“ä½œæç¤º</h4>
                                <div style="font-size: 12px; color: #ccc; line-height: 1.4;">
                                    <strong>Chromeï¼š</strong> é•¿æŒ‰è§†é¢‘ â†’ é€‰æ‹©"ä¸‹è½½è§†é¢‘"<br>
                                    <strong>Firefoxï¼š</strong> é•¿æŒ‰è§†é¢‘ â†’ é€‰æ‹©"ä¿å­˜è§†é¢‘"<br>
                                    <strong>Safariï¼š</strong> é•¿æŒ‰è§†é¢‘ â†’ é€‰æ‹©"å­˜å‚¨åˆ°æ–‡ä»¶"<br>
                                    <strong>Samsung Internetï¼š</strong> é•¿æŒ‰è§†é¢‘ â†’ é€‰æ‹©"ä¸‹è½½"<br>
                                    <br>
                                    <strong>å¦‚æœæ²¡æœ‰ä¸‹è½½é€‰é¡¹ï¼š</strong><br>
                                    â€¢ å°è¯•æ›´æ¢æµè§ˆå™¨<br>
                                    â€¢ æ£€æŸ¥æµè§ˆå™¨ä¸‹è½½è®¾ç½®<br>
                                    â€¢ ä½¿ç”¨ä¸“é—¨çš„ä¸‹è½½å™¨åº”ç”¨
                                </div>
                            </div>
                            
                            <div style="text-align: center; margin-top: 20px;">
                                <button onclick="this.parentElement.parentElement.remove(); document.body.removeChild(document.querySelector('[style*=\"æ­£åœ¨å‡†å¤‡ä¸‹è½½\"], [style*=\"ç§»åŠ¨ç«¯ä¸‹è½½è¯´æ˜\"]') || document.createElement('div'))" 
                                        style="
                                            background: #6c757d;
                                            color: white;
                                            border: none;
                                            padding: 12px 24px;
                                            border-radius: 6px;
                                            font-size: 14px;
                                        ">
                                    å…³é—­
                                </button>
                            </div>
                        `;
                        
                        document.body.appendChild(interfaceContainer);
                        
                        // Auto-remove after 2 minutes
                        setTimeout(() => {
                            if (document.body.contains(interfaceContainer)) {
                                document.body.removeChild(interfaceContainer);
                            }
                        }, 120000);
                        
                        console.log('Mobile download interface created');
                    };
                    
                    // Show the comprehensive download interface
                    createMobileDownloadInterface(url, filename);
                    
                } else {
                    // Desktop download logic (existing fetch + blob method)
                    console.log('Using desktop download method');
                    
                    // Method 1: Try fetch and blob download for desktop
                    fetch(url)
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Network response was not ok');
                            }
                            return response.blob();
                        })
                        .then(blob => {
                            // Create blob URL and download
                            const blobUrl = window.URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = blobUrl;
                            a.download = filename || 'video.mp4';
                            a.style.display = 'none';
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            
                            // Clean up blob URL
                            setTimeout(() => window.URL.revokeObjectURL(blobUrl), 100);
                            
                            // Update message
                            downloadMsg.style.background = '#51cf66';
                            downloadMsg.textContent = `âœ… ä¸‹è½½æˆåŠŸ: ${filename || 'video.mp4'}`;
                            
                            console.log('Download completed via fetch method');
                        })
                        .catch(error => {
                            console.warn('Fetch download failed, trying direct method:', error);
                            
                            // Method 2: Direct download link (fallback)
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = filename || 'video.mp4';
                            a.style.display = 'none';
                            a.setAttribute('target', '_self');
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            
                            // Update message
                            downloadMsg.style.background = '#f39c12';
                            downloadMsg.textContent = `âš ï¸ æ­£åœ¨å°è¯•ä¸‹è½½: ${filename || 'video.mp4'}`;
                            
                            setTimeout(() => {
                                downloadMsg.style.background = '#51cf66';
                                downloadMsg.textContent = `âœ… ä¸‹è½½å·²å¯åŠ¨: ${filename || 'video.mp4'}`;
                            }, 1000);
                            
                            console.log('Download attempted via direct method');
                        });
                }
                
                // Auto-remove notification after 8 seconds for mobile
                setTimeout(() => {
                    if (document.body.contains(downloadMsg)) {
                        document.body.removeChild(downloadMsg);
                    }
                }, isMobile ? 8000 : 5000);
                
            } catch (error) {
                console.error('Download failed:', error);
                
                // Show error message
                const errorMsg = document.createElement('div');
                errorMsg.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #ff6b6b;
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    z-index: 10000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    font-family: Arial, sans-serif;
                    font-size: 14px;
                    max-width: 300px;
                `;
                
                if (isMobile) {
                    errorMsg.innerHTML = `
                        <div>âŒ ä¸‹è½½åˆå§‹åŒ–å¤±è´¥</div>
                        <div style="margin-top: 8px; font-size: 12px;">
                            è¯·å°è¯•ï¼š<br>
                            1. åˆ·æ–°é¡µé¢é‡è¯•<br>
                            2. ä½¿ç”¨å…¶ä»–æµè§ˆå™¨<br>
                            3. å¤åˆ¶é“¾æ¥åˆ°ä¸‹è½½å™¨
                        </div>
                        <a href="${url}" target="_blank" style="color: white; text-decoration: underline; display: block; margin-top: 8px;">
                            ç›´æ¥è®¿é—®è§†é¢‘é“¾æ¥
                        </a>
                    `;
                } else {
                    errorMsg.textContent = `âŒ ä¸‹è½½å¤±è´¥: ${error.message}`;
                }
                
                document.body.appendChild(errorMsg);
                
                setTimeout(() => {
                    if (document.body.contains(errorMsg)) {
                        document.body.removeChild(errorMsg);
                    }
                }, 10000);
                
                // Last resort: try to open in new tab with download hint
                if (!isMobile) {
                    console.log('Trying last resort method...');
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = filename || 'video.mp4';
                    link.target = '_blank';
                    link.click();
                }
            }
        };

        // Initialize the downloader when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new TwitterVideoDownloader();
        });
    </script>
</body>
</html> 